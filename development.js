(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{444:function(t,e,n){},517:function(t,e,n){"use strict";var s=n(444);n.n(s).a},652:function(t,e,n){"use strict";n.r(e);n(16),n(30),n(234);var s=n(499),i=n.n(s);function o(t,e,n,s,i,o,r){try{var a=t[o](r),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(s,i)}function r(t){return function(){var e=this,n=arguments;return new Promise((function(s,i){var r=t.apply(e,n);function a(t){o(r,s,i,a,c,"next",t)}function c(t){o(r,s,i,a,c,"throw",t)}a(void 0)}))}}var a={data:function(){return{activated:!1,state:{version:"",logs:[],publishDocument:"",publishLibrary:""},config:{version:"",codesnippets:!1,codesnippetsUpdate:!1}}},computed:{publishIcon:function(){return"error"==this.state.publishDocument?"error":"done"==this.state.publishDocument?"correct":"upload"}},watch:{"config.version":function(t){console.log(t)}},mounted:function(){var t=this;return r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t,t.activated=!0,r(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/devapi/code-snippets");case 2:"update"!==(n=e.sent.data).data.state?t.config.codesnippets=n.data.state:(t.config.codesnippets=!0,t.config.codesnippetsUpdate=!0),t.$watch("config.codesnippets",(function(t){t?i.a.put("/devapi/code-snippets"):i.a.delete("/devapi/code-snippets")}));case 5:case"end":return e.stop()}}),e)})))(),t.getPublishDocumentState(),t.getPublishLibraryState(),t.getLogs(),t.getVersion();case 7:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){this.activated=!1},methods:{configPutCodesnippets:function(){i.a.put("/devapi/code-snippets"),this.config.codesnippetsUpdate=!1},toggleCodesnippets:function(){this.config.codesnippets=!this.config.codesnippets},doPublishDocument:function(){this.state.publishDocument="working",i.a.post("/devapi/publish-document")},doPublishLibrary:function(){this.state.publishLibrary="working",i.a.post("/devapi/publish-library",{version:this.config.version})},getPublishDocumentState:function(){var t=this;return r(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/devapi/publish-document");case 2:n=e.sent.data,t.state.publishDocument=n.data.state,t&&t.activated&&setTimeout(t.getPublishDocumentState,1e3);case 5:case"end":return e.stop()}}),e)})))()},getPublishLibraryState:function(){var t=this;return r(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/devapi/publish-library");case 2:n=e.sent.data,t.state.publishLibrary=n.data.state,t&&t.activated&&setTimeout(t.getPublishLibraryState,1e3);case 5:case"end":return e.stop()}}),e)})))()},getLogs:function(){var t=this;return r(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/devapi/logs");case 2:n=e.sent.data,t.state.logs=n.data.logs,t&&t.activated&&setTimeout(t.getLogs,1e3);case 5:case"end":return e.stop()}}),e)})))()},getVersion:function(){var t=this;return r(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/devapi/version");case 2:n=e.sent.data,t.state.version=n.data.version,t&&t.activated&&setTimeout(t.getVersion,1e3);case 5:case"end":return e.stop()}}),e)})))()}},filters:{publishDocumentStateToText:function(t){return""==t?"发布文档":"working"==t?"正在发布文档":"error"==t?"文档发布失败":"done"==t?"文档发布成功":void 0},publishLibraryStateToText:function(t){return""==t?"发布新版本":"working"==t?"正在发布新版本":"error"==t?"新版本发布失败":"done"==t?"新版本发布成功":void 0}}},c=(n(517),n(0)),u=Object(c.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("document",[n("div",{staticClass:"container"},[n("q-title",{attrs:{level:2,colorful:""}},[t._v("编辑器配置")]),t._v(" "),n("q-panel",{staticClass:"block clearfloat",staticStyle:{cursor:"pointer"},attrs:{border:""},on:{click:t.toggleCodesnippets}},[n("div",{staticClass:"left"},[n("q-text",[n("strong",[t._v("项目代码提示")])]),t._v(" "),n("q-footnote",[t._v("激活后将自动向当前项目作用域中写入代码提示配置（仅限 VSCode）")])],1),t._v(" "),n("div",{staticClass:"right"},[n("q-button",{directives:[{name:"show",rawName:"v-show",value:t.config.codesnippetsUpdate,expression:"config.codesnippetsUpdate"}],attrs:{size:"small"},on:{click:function(e){return e.stopPropagation(),t.configPutCodesnippets(e)}}},[t._v("配置有更新，重新写入")]),t._v(" "),n("q-switch",{staticStyle:{"pointer-events":"none"},model:{value:t.config.codesnippets,callback:function(e){t.$set(t.config,"codesnippets",e)},expression:"config.codesnippets"}})],1)]),t._v(" "),n("q-title",{attrs:{level:2,colorful:""}},[t._v("发布工具")]),t._v(" "),n("q-footnote",[t._v("使用前需确保环境配置正确")]),t._v(" "),n("q-panel",{staticClass:"block",attrs:{border:""}},[n("q-panel",{staticClass:"logs",attrs:{secondary:""}},[n("q-footnote",[t._v("终端日志")]),t._v(" "),t._l(t.state.logs,(function(e,s){return n("span",{key:s},["message"===e.type?n("q-text",[t._v(t._s(e.message))]):n("q-text",{attrs:{color:"enjolras"}},[n("strong",[t._v(t._s(e.message))])]),t._v(" "),n("q-divider")],1)}))],2),t._v(" "),n("div",{staticClass:"left"},[n("q-text",[t._v("将编译文档并推送至远端分支及执行部署")]),t._v(" "),n("q-footnote",[t._v("远端分支地址配置在 ...script/publish-document.js 中")])],1),t._v(" "),n("div",{staticClass:"right"},[n("q-button",{attrs:{type:"primary",icon:t.publishIcon,busy:"working"===t.state.publishDocument},on:{click:t.doPublishDocument}},[t._v(t._s(t._f("publishDocumentStateToText")(t.state.publishDocument)))])],1),t._v(" "),n("div",{staticClass:"left"},[n("q-text",[t._v("将重新编译项目并推送 GitHub 和 NPM")]),t._v(" "),n("q-footnote",[t._v("当前版本："+t._s(t.state.version))])],1),t._v(" "),n("div",{staticClass:"right"},[n("q-input",{staticStyle:{width:"96px"},attrs:{placeholder:"新版本号"},model:{value:t.config.version,callback:function(e){t.$set(t.config,"version",e)},expression:"config.version"}}),t._v(" "),n("q-button",{attrs:{type:"primary",icon:t.publishIcon,busy:"working"===t.state.publishLibrary},on:{click:t.doPublishLibrary}},[t._v(t._s(t._f("publishLibraryStateToText")(t.state.publishLibrary)))])],1)],1)],1)])}),[],!1,null,"3a05e1d4",null);e.default=u.exports}}]);